<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>jQuery File Upload Example</title>
</head>
<body>

<%= form_for Photo.new, :controller => "photos", :action => "create" do |f| %>
  <%= f.label :image, "Upload paintings:" %>
  <%= file_field_tag :image, multiple: true %>
<% end %>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="/assets/vendor/jquery.ui.widget.js"></script>
<script src="/assets/jquery.iframe-transport.js"></script>
<script src="/assets/jquery.fileupload.js"></script>
<script>
$(function () {
  $('#new_photo').fileupload({
    dataType: 'script',
      add: function (e, data) {
        data.context = $('<button/>').text('Upload')
          .appendTo(document.body)
          .click(function () {
            data.context = $('<p/>').text('Uploading...').replaceAll($(this));
                data.submit();
            });
    	},
      done: function (e, data) {
      	console.log("We're done")
        data.context.text('Upload finished.');
      }
  });
});
</script>
</body> 
</html>